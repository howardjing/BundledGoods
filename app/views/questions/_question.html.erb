<div>
  <%= render :partial => 'prequestion', :locals => { :question => question } %>
</div>

<P>
	<i>
		Each good has a utility value associated with each good based on two times the subscript of the good. 
<P>
		(ie. Good 1 (x<sub>1</sub>) has utility value 2, Good 2 (x<sub>2</sub>) has utility value 4, Good i (x<sub>i</sub> has utility value 2 times i...)
	</i>

<div class="row">
	<div class="span7">
		<div id="menu">
		  There are <%= pluralize question.goods.size, 'good' %> for sale. Their prices are as follows:

			<ul>
		    <%= render :partial => 'good', :collection => question.menu_items.shuffle %>
		  </ul>
		</div>

		<div>
		  You value the bundles in the following ways:
		  <ul>
		    <% question.bundles.shuffle.each do |goods| %>
		      <li>
          <div class="show-statement">[Click to show statement] (<%= goods.goods_names(:number) %>)</div>
		        <div class="explanation">
		            <%= simple_format goods.ordered_goods_statement %>
		        </div>
		      </li>
		    <% end  %>
		  </ul>
		</div>
	</div>
	
	<div class="span5">
		<%= render :partial => 'choices', :locals => { :question => question }%>
	</div>
</div>

<script type="text/javascript">
  $(function() {
      $('.show-statement').click(function() {
          var content = "showing: " + $.trim($(this).next().text());
          createQuestionExplanation(content);
      });

      $('.explanation').click(function() {
          var content = "hiding: " + $.trim($(this).text());
          createQuestionExplanation(content);
      });
  });

  createQuestionExplanation = function(content) {
      $.ajax({
          type: 'POST',
          url: '<%= explanation_question_url question %>',
          data: { content: content }
        });
  }
</script>

